# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/), and this project adheres to [Semantic Versioning](https://semver.org/lang/zh-CN/).

- [2.2.1 \[release\] (2023-10-04)](#221-release-2023-10-04)
  - [Fixed](#fixed)
- [2.2.0 \[release\] (2023-09-27)](#220-release-2023-09-27)
  - [Added](#added)
  - [Removed](#removed)
  - [Fixed](#fixed-1)
- [2.1.0 \[release\] (2023-09-09)](#210-release-2023-09-09)
  - [Added](#added-1)
  - [Changed](#changed)
  - [Removed](#removed-1)
  - [Fixed](#fixed-2)
- [2.0.2 \[release\] (2023-09-05)](#202-release-2023-09-05)
  - [Added](#added-2)
  - [Fixed](#fixed-3)
- [2.0.1 \[release\] (2023-09-05)](#201-release-2023-09-05)
  - [Added](#added-3)
  - [Changed](#changed-1)
  - [Removed](#removed-2)
- [1.2.2 \[release\] (2022-05-01)](#122-release-2022-05-01)
  - [Changed](#changed-2)
- [1.2.1 \[release\] (2022-04-23)](#121-release-2022-04-23)
  - [Added](#added-4)
  - [Fixed](#fixed-4)
- [1.2.0 First Released Version \[release\] (2022-04-16)](#120-first-released-version-release-2022-04-16)
  - [Added](#added-5)
  - [Changed](#changed-3)
  - [Fixed](#fixed-5)
- [1.1.3 (2022-04-05)](#113-2022-04-05)
  - [Fixed](#fixed-6)
- [1.1.2 (2022-04-04)](#112-2022-04-04)
  - [Added](#added-6)
  - [Fixed](#fixed-7)
- [1.1.1 (2022-04-04)](#111-2022-04-04)
  - [Added](#added-7)
  - [Changed](#changed-4)
  - [Fixed](#fixed-8)
- [1.1.0 (2022-04-04)](#110-2022-04-04)
  - [Added](#added-8)
  - [Changed](#changed-5)
  - [Removed](#removed-3)
- [1.0.0 (2022-04-03)](#100-2022-04-03)
  - [Added](#added-9)

## [2.2.1] [[release](https://github.com/pilgrimlyieu/AutoHotkey-Script/releases/tag/OCRC-v2.2.1)] (2023-10-04)

The version was updated a few days ago, but it has not been released and updated for a long time. In fact, not much has been updated, just fixing some problems.

### Fixed

- Text OCR
  - The setting update does not take effect on the imported image or folder OCR in time
  - JPG encoding accuracy does not take effect on the imported image or folder OCR
  - The problem of saving the result window even if canceling

## [2.2.0] [[release](https://github.com/pilgrimlyieu/AutoHotkey-Script/releases/tag/OCRC-v2.2.0)] (2023-09-27)

> Generated by GitHub Copilot

#26 took two weeks to procrastinate before it was completed. The late update adds the function of "importing pictures" and "importing folders" to perform Text OCR on external files.

### Added

- General
  - The taskbar menu adds the "Import Picture" and "Import Folder" options to support the Text OCR of external files.
  - "Import Picture": You can select multiple image files (supports jpg, jpeg, png and bmp formats), and an OCR result window will be opened for each image.
  - "Import Folder": You can select a folder, and the results of all image files in the folder (supports jpg, jpeg, png and bmp formats) will be saved to the corresponding txt file with the file name.
  - The problem of saving the result even if canceling in the result window

### Removed

- Text OCR
  - **BREAKING**: Removed the "Original Result" option in "Default Punctuation" and "Default Spaces".

### Fixed

- Text OCR
  - Baidu OCR
    - The problem that "handwritten text recognition" and "network picture text recognition" do not support intelligent paragraphs
    - The problem that the translation of the result window will initially select the entire text

## [2.1.0] [[release](https://github.com/pilgrimlyieu/AutoHotkey-Script/releases/tag/OCRC-v2.1.0)] (2023-09-09)

> Generated by GitHub Copilot

These days, I have been focusing on the development of OCRC v2.1.0 (except for going out for a day). The update of this version is quite huge, almost rewriting the structure, and the configuration file has also been subverted. In fact, it can be released as 3.0.0. But I still decided to release it as 2.1.0, because the name of the branch I started with was 2.1.0, and I think 3.0.0 should be a bigger version, there should be more new features, rather than just refactoring. Of course, in addition to the modification of the structure, some new functions have also been introduced, which makes OCRC more extensible and will make it easier to access new OCR engines in the future.

### Added

- General
  - Setting interface tool tip switch option
  - Text OCR and formula OCR engine setting options
- Text OCR
  - Default translation source language option
  - Default translation target language option
  - Baidu OCR
  - Recognition language option
    - Default translation source language option
    - Default translation target language option
    - Result window switch Text OCR engine option (currently only one option)
    - Result window switch recognition language option
    - Result window switch translation language option
- Formula OCR
  - Add Bing OCR engine (the effect is general, the typesetting is also poor, and only pure formulas are supported)
  - Result window switch formula OCR engine option
- Options
  - `Basic_TextOCREngine`
  - `Basic_FormulaOCREngine`
  - `Basic_OCRCToolTips`
  - `TextOCR_TranslateFrom`
  - `TextOCR_TranslateTo`
  - `TextOCR_TranslateLanguages` section with the following default key values
    - `自动检测`: `auto`
    - `简体中文`: `zh-CN`
    - `英文`: `en`
  - `BaiduOCR_LanguageType`
  - `BaiduOCR_LanguageTypes` section with the following default key values
    - `中英文混合`: `CHN_ENG`
    - `英文`: `ENG`

### Changed

- General
  - Basic settings are separated from engine settings
- Text OCR
  - Baidu OCR
    - Result window adjustment
- Formula OCR
  - Result window adjustment
- **BREAKING**: Options
  - `Basic_BaiduOCROnOff` -> `Basic_TextOCROnOff`
  - `Basic_MathpixOCROnOff` -> `Basic_FormulaOCROnOff`
  - `Baidu` section -> `BaiduOCR` section
  - `Baidu_Hotkey` -> `Basic_TextOCRHotkey`
  - `Baidu_APIKey` -> `BaiduOCR_APIKey`
  - `Baidu_SecretKey` -> `BaiduOCR_SecretKey`
  - `Baidu_Token` -> `BaiduOCR_Token`
  - `Baidu_TokenExpiration` -> `BaiduOCR_TokenExpiration`
  - `Baidu_RecognitionType` -> `BaiduOCR_ProbabilityType`
  - `Baidu_ProbabilityType` -> `BaiduOCR_ProbabilityType`
  - `Baidu_FormatStyle` -> `TextOCR_FormatStyle`
  - `Baidu_PunctuationStyle` -> `TextOCR_PunctuationStyle`
  - `Baidu_SpaceStyle` -> `TextOCR_SpaceStyle`
  - `Baidu_TranslationEngine` -> `TextOCR_TranslateEngine`
  - `Baidu_SearchEngine` -> `TextOCR_SearchEngine`
  - `Baidu_CloseAndSearch` -> `TextOCR_CloseAndSearch`
  - `Baidu_SearchEngines` section -> `TextOCR_SearchEngines` section
  - `Mathpix` section -> `MathpixOCR` section
  - `Mathpix_Hotkey` -> `Basic_FormulaOCRHotkey`
  - `Mathpix_APIKey` -> `MathpixOCR_APIKey`
  - `Mathpix_AppKey` -> `MathpixOCR_AppKey`
  - `Mathpix_InlineStyle` -> `FormulaOCR_InlineStyle`
  - `Mathpix_DisplayStyle` -> `FormulaOCR_DisplayStyle`
  - `Mathpix_DefaultSelect` -> `FormulaOCR_DefaultSelect`

### Removed

- Text OCR
  - Tencent translation related options
  - Baidu OCR
    - Default translation engine option
    - Default translation type option
- Options
  - `Advance_TencentTranslationSecretID`
  - `Advance_TencentTranslationSecretKey`
  - `Baidu_TranslationType`

### Fixed

- General
  - AutoHotkey runs the problem of popping up internal errors (just masking the problem without solving it)
  - Changing the hotkey of text or formula OCR will re-enable the closed hotkey
- Text OCR
  - Baidu OCR
    - The problem of retaining only the first paragraph of multi-paragraph content translation
    - The problem of confidence calculation when the result is empty
- Formula OCR
  - Mathpix OCR
    - The problem that the mathematical separator in the text formula does not match the setting
    - The problem that the line break character `\\` is incorrectly processed as `\`
    - The problem of line breaks in inline formulas
    - The aesthetic problem of selecting all when the result window just pops up

## [2.0.2] [[release](https://github.com/pilgrimlyieu/AutoHotkey-Script/releases/tag/OCRC-v2.0.2)] (2023-09-05)

> Generated by GitHub Copilot

### Added

- Baidu OCR
  - Right-click quick search support

### Fixed

- Baidu OCR
  - The problem of "translation results being incorrectly injected into OCR results"

## [2.0.1] [[release](https://github.com/pilgrimlyieu/AutoHotkey-Script/releases/tag/OCRC-v2.0.1)] (2023-09-05)

> Generated by GitHub Copilot

It has been 16 months since the latest stable version of OCRC v1.2.2 was released, and it has been two weeks since the v2.0.0-beta.1 refactoring. In the past 6 beta versions (beta.1 and beta.5 were released), I have added functions, modified options, and fixed errors. And now it's time to release the stable version.

### Added

- General
  - Option to pop up a prompt when no screenshot is detected
  - Help prompt on the settings page
- Baidu OCR
  - Option to close the result window immediately after searching
  - Custom search engine support (see #21 for details)
  - Right-click quick search support (see #21 for details)
  - Translation support (see #23 for details)
    - Google Translate (supported, using two APIs. Proxy can be configured)
    - Tencent Translation (not supported yet. SecretID and SecretKey need to be configured)
- Options
  - `Basic_SnipWarning`
  - `Advance_GoogleTranslationProxy`
  - `Advance_TencentTranslationSecretID`
  - `Advance_TencentTranslationSecretKey`
  - `Baidu_TranslationEngine`
  - `Baidu_CloseAndSearch`
  - `Baidu_SearchEngines` section and the following default key values
    - `百度`: `https://www.baidu.com/s?wd=@W`
    - `谷歌`: `https://www.google.com/search?q=@W`
    - `必应`: `https://cn.bing.com/search?q=@W`
    - `百度百科`: `https://baike.baidu.com/item/@W`
    - `维基百科`: `https://zh.wikipedia.org/wiki/@W`

### Changed

- General
  - **BREAKING**: **REFACTOR code** (convert code from v1.1 to v2)
    - Use [`ahk-json.dll`](https://www.autohotkey.com/boards/viewtopic.php?t=100602) written by [thqby](https://github.com/thqby) to parse and convert JSON, which is written in C++. It *may* improve runtime efficiency
  - **BREAKING**: Convert the configuration file name from `OCRC.privacy.ini` to `OCRC.ini`
  - Use `SnippingTool` instead of `ScreenClippingHost` as the default screenshot tool. So that it does not depend on the shortcut <kbd>Win</kbd> + <kbd>Shift</kbd> + <kbd>S</kbd>
- **BREAKING**: Options
  - `Baidu_RecogType` -> `Baidu_RecognitionType`
  - `Baidu_ProbType` -> `Baidu_ProbabilityType`
  - `Baidu_PuncStyle` -> `Baidu_PunctuationStyle`
  - `Baidu_TranType` -> `Baidu_TranslationType`

### Removed

- General
  - Option to automatically restart after important settings are changed
- Baidu OCR
  - Removed search mirror sites (Google mirror and Wikipedia mirror)
  - Everything configuration related options
- **BREAKING**: Options
  - `Basic_AutoReloadOnOff`
  - `Advance_EverythingOnOff`
  - `Advance_EverythingPath`

## [1.2.2] [[release](https://github.com/pilgrimlyieu/AutoHotkey-Script/releases/tag/OCRC-v1.2.2)] (2022-05-01)

### Changed

- General
  - Change clipboard wait time from 0.001s to 0.1s
  - Rename icon name from "OCRC_icon.ico" to "OCRC.ico"
- Baidu
  - Calculate probability before formatting punctuation and space
- Mathpix
  - Show TextResult only when it is different from InlineResult and it doesn't contain "\begin{xxx}" which LaTeXResult does

## [1.2.1] [[release](https://github.com/pilgrimlyieu/AutoHotkey-Script/releases/tag/OCRC-v1.2.1)] (2022-04-23)

### Added

- General
  - Custom Everything path support (1.2.0)
  - Screenshot maximum time support
  - Screenshot buffer time support
  - Option of auto reload after crucial change

### Fixed

- General
  - [Can not start another OCR immediately after cancel previous OCR](https://github.com/pilgrimlyieu/AutoHotkey-Script/issues/10)
  - [Switch on OCR can not create a corresponding hotkey immediately](https://github.com/pilgrimlyieu/AutoHotkey-Script/issues/11) (Still should reload to update change)
  - [Custom Everything not support](https://github.com/pilgrimlyieu/AutoHotkey-Script/issues/13)
  - [Unknown issue about strange behavior of opening setting](https://github.com/pilgrimlyieu/AutoHotkey-Script/issues/15)

## [1.2.0 First Released Version] [[release](https://github.com/pilgrimlyieu/AutoHotkey-Script/releases/tag/OCRC-v1.2.0)] (2022-04-16)

### Added

- General
  - OCR switch support
  - EncodingBitmap-to-64String quality support
  - Local screenshot support (Default)
  - Third-party screenshot support
  - ~~Everything path support~~

### Changed

- General
  - Change config name from "OCRC_config.privacy.ini" to "OCRC.privacy.ini"
- Mathpix
  - Now show "formula text" only when "inline formula" is different from it
  - Reduce width of result windows

### Fixed

- General
  - "[Empty content will not be written into config](https://github.com/pilgrimlyieu/AutoHotkey-Script/issues/9)" bug

## [1.1.3] (2022-04-05)

### Fixed

- Mathpix
  - "Single line text with formula doesn't return single result" bug

## [1.1.2] (2022-04-04)

### Added

- [README](README.md)(Not completed)

### Fixed

- Baidu
  - "Result is blank while default punctuation is 'raw result'" bug

## [1.1.1] (2022-04-04)

### Added

- Baidu
  - Bing Search support

### Changed

- Baidu
  - Remove extra line breaking of "Intelligent paragraph" and "Merge multiple lines"

### Fixed

- Baidu
  - "Intelligent quotation mark doesn't work" bug

## [1.1.0] (2022-04-04)

### Added

- CHANGELOG
- Push "Esc" to close result window
- Baidu
  - Token expiration check
  - Get token error message

### Changed

- Baidu
  - Change warning level(YELLOW) from 60 to 80
  - Change error level(RED) from 20 to 60
- Mathpix
  - Clear clipboard before clip new formula

### Removed

- Baidu
    - Reget token after get OCR result error

## [1.0.0] (2022-04-03)

### Added

- Baidu OCR
  - Multiple result windows support
  - Custom hotkey
  - Recognizing type choice
    - Basic
    - Accurate
    - Handwriting
    - Web image
  - Function
    - Format
      - Intelligent paragraph
      - Split multiple lines
      - Merge multiple lines
    - Punctuation
      - Intelligent punctuation
      - Raw result
      - Chinese punctuation
      - English punctuation
    - Space
      - Intelligent space
      - Raw result
      - Remove space
    - Search
      - Baidu Search
      - Google Search
      - Google(mirror) Search
      - Baidu Encyclopedia
      - Wikipedia(mirror)
      - Everything
    - Change to Clip
  - Probability
    - Precise mode
    - Rough mode
    - Close mode
    - Bar
- Mathpix
  - Multiple result windows support
  - Custom hotkey
  - Default option
    - Inline style
    - Display style
    - Default select
  - Function
    - Click to Clip
  - Confidence
    - Bar

[2.2.1]: https://github.com/pilgrimlyieu/AutoHotkey-Script/compare/OCR-v2.2.0...OCR-v2.2.1
[2.2.0]: https://github.com/pilgrimlyieu/AutoHotkey-Script/compare/OCR-v2.1.0...OCR-v2.2.0
[2.1.0]: https://github.com/pilgrimlyieu/AutoHotkey-Script/compare/OCR-v2.0.2...OCR-v2.1.0
[2.0.2]: https://github.com/pilgrimlyieu/AutoHotkey-Script/compare/OCR-v2.0.1...OCR-v2.0.2
[2.0.1]: https://github.com/pilgrimlyieu/AutoHotkey-Script/compare/OCR-v1.2.2...OCR-v2.0.1
[1.2.2]: https://github.com/pilgrimlyieu/AutoHotkey-Script/compare/OCR-v1.2.1...OCR-v1.2.2
[1.2.1]: https://github.com/pilgrimlyieu/AutoHotkey-Script/compare/OCR-v1.2.0...OCR-v1.2.1
[1.2.0 First Released Version]: https://github.com/pilgrimlyieu/AutoHotkey-Script/compare/6fad68c...OCRC-v1.2.0
[1.1.3]: https://github.com/pilgrimlyieu/AutoHotkey-Script/compare/df92b84...6fad68c
[1.1.2]: https://github.com/pilgrimlyieu/AutoHotkey-Script/compare/980eebe...df92b84
[1.1.1]: https://github.com/pilgrimlyieu/AutoHotkey-Script/compare/53b2361...980eebe
[1.1.0]: https://github.com/pilgrimlyieu/AutoHotkey-Script/compare/3aa1fb2...53b2361
[1.0.0]: https://github.com/pilgrimlyieu/AutoHotkey-Script/pull/8